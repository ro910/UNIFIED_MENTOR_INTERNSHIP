<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Advanced Expense Tracker | Internship Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .app-container {
            background: #fff;
            width: 95%;
            max-width: 1000px;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            margin-bottom: 15px;
        }

        .top-settings {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .setting-box {
            flex: 1;
            background: #f4f6f9;
            padding: 15px;
            border-radius: 10px;
        }

        .setting-box h3 {
            margin-bottom: 5px;
        }

        .setting-box input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
        }

        .summary {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .card {
            flex: 1;
            background: #f4f6f9;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .income { color: green; }
        .expense { color: red; }
        .balance { color: #2b6cb0; }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 10px;
        }

        input, select, button {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        button {
            background: #667eea;
            color: #fff;
            cursor: pointer;
        }

        button:hover {
            background: #5a67d8;
        }

        .error {
            color: red;
            text-align: center;
            margin-top: 10px;
        }

        .warning {
            color: darkred;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }

        .saving-jar {
            margin-top: 15px;
        }

        .progress-bar {
            width: 100%;
            background: #ddd;
            border-radius: 20px;
            overflow: hidden;
            height: 20px;
            margin-top: 5px;
        }

        .progress {
            height: 100%;
            background: green;
            width: 0%;
            transition: 0.5s;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }

        .green { color: green; font-weight: bold; }
        .red { color: red; font-weight: bold; }
        .blue { color: blue; font-weight: bold; }

        .delete-btn {
            background: red;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        @media(max-width:600px) {
            .summary, .top-settings {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>

<div class="app-container">

    <h1>Advanced Expense Tracker</h1>

    <!-- ================= SETTINGS ================= -->
    <div class="top-settings">
        <div class="setting-box">
            <h3>Monthly Expense Limit (₹)</h3>
            <input type="number" id="expenseLimit" placeholder="Set limit">
            <button onclick="saveLimit()">Save Limit</button>
        </div>

        <div class="setting-box saving-jar">
            <h3>Saving Jar Goal (₹100 - ₹5000)</h3>
            <input type="number" id="savingGoal" placeholder="Set saving goal">
            <button onclick="saveGoal()">Save Goal</button>
            <p id="savingStatus">Saved: ₹0</p>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
        </div>
    </div>

    <!-- ================= SUMMARY ================= -->
    <div class="summary">
        <div class="card">
            <h3>Total Income</h3>
            <p class="income" id="totalIncome">₹0</p>
        </div>
        <div class="card">
            <h3>Total Expense</h3>
            <p class="expense" id="totalExpense">₹0</p>
        </div>
        <div class="card">
            <h3>Balance</h3>
            <p class="balance" id="balance">₹0</p>
        </div>
    </div>

    <div class="warning" id="limitWarning"></div>

    <!-- ================= FORM ================= -->
    <div class="form-row">
        <input type="date" id="date">
        <input type="text" id="description" placeholder="Description">
        <select id="category">
            <option value="">Select Category</option>
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Entertainment</option>
            <option>Rent</option>
            <option>Salary</option>
            <option>Other</option>
        </select>
    </div>

    <div class="form-row">
        <input type="number" id="amount" placeholder="Amount">
        <select id="type">
            <option value="">Select Type</option>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
            <option value="other">Other</option>
        </select>
        <button onclick="addTransaction()">Add Transaction</button>
    </div>

    <div class="error" id="errorMsg"></div>

    <!-- ================= TRANSACTION LIST ================= -->
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Category</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="transactionTable"></tbody>
    </table>

</div>

<script>
    let transactions = [];
    let expenseLimit = 0;
    let savingGoal = 0;

    window.onload = function() {
        transactions = JSON.parse(localStorage.getItem("transactions")) || [];
        expenseLimit = Number(localStorage.getItem("expenseLimit")) || 0;
        savingGoal = Number(localStorage.getItem("savingGoal")) || 0;

        document.getElementById("expenseLimit").value = expenseLimit || "";
        document.getElementById("savingGoal").value = savingGoal || "";

        renderTransactions();
        updateSummary();
        updateSavingJar();
    };

    function saveLimit() {
        expenseLimit = Number(document.getElementById("expenseLimit").value);
        localStorage.setItem("expenseLimit", expenseLimit);
        alert("Expense limit saved!");
    }

    function saveGoal() {
        savingGoal = Number(document.getElementById("savingGoal").value);
        if (savingGoal < 100 || savingGoal > 5000) {
            alert("Saving goal must be between ₹100 and ₹5000");
            return;
        }
        localStorage.setItem("savingGoal", savingGoal);
        alert("Saving goal saved!");
        updateSavingJar();
    }

    function addTransaction() {
        const date = document.getElementById("date").value;
        const description = document.getElementById("description").value;
        const category = document.getElementById("category").value;
        const amount = Number(document.getElementById("amount").value);
        const type = document.getElementById("type").value;
        const errorMsg = document.getElementById("errorMsg");

        errorMsg.textContent = "";

        if (!date || !description || !category || !amount || !type) {
            errorMsg.textContent = "Please fill all fields!";
            return;
        }

        const transaction = {
            id: Date.now(),
            date,
            description,
            category,
            amount,
            type
        };

        transactions.push(transaction);
        saveData();
        renderTransactions();
        updateSummary();
        updateSavingJar();
        clearForm();
    }

    function renderTransactions() {
        const table = document.getElementById("transactionTable");
        table.innerHTML = "";

        transactions.forEach(tx => {
            let colorClass = "blue";
            if (tx.type === "income") colorClass = "green";
            else if (tx.type === "expense") colorClass = "red";

            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${tx.date}</td>
                <td>${tx.description}</td>
                <td>${tx.category}</td>
                <td class="${colorClass}">${tx.type}</td>
                <td class="${colorClass}">₹${tx.amount}</td>
                <td><button class="delete-btn" onclick="deleteTransaction(${tx.id})">Delete</button></td>
            `;
            table.appendChild(tr);
        });
    }

    function deleteTransaction(id) {
        transactions = transactions.filter(tx => tx.id !== id);
        saveData();
        renderTransactions();
        updateSummary();
        updateSavingJar();
    }

    function updateSummary() {
        let totalIncome = 0;
        let totalExpense = 0;

        transactions.forEach(tx => {
            if (tx.type === "income") totalIncome += tx.amount;
            if (tx.type === "expense") totalExpense += tx.amount;
        });

        const balance = totalIncome - totalExpense;

        document.getElementById("totalIncome").textContent = "₹" + totalIncome;
        document.getElementById("totalExpense").textContent = "₹" + totalExpense;
        document.getElementById("balance").textContent = "₹" + balance;

        // Expense limit warning
        const warning = document.getElementById("limitWarning");
        if (expenseLimit > 0 && totalExpense > expenseLimit) {
            warning.textContent = "⚠️ Warning: You have crossed your expense limit!";
        } else {
            warning.textContent = "";
        }
    }

    function updateSavingJar() {
        let savedAmount = 0;

        transactions.forEach(tx => {
            if (tx.type === "income") savedAmount += tx.amount;
        });

        const status = document.getElementById("savingStatus");
        const bar = document.getElementById("progressBar");

        if (savingGoal > 0) {
            const percent = Math.min((savedAmount / savingGoal) * 100, 100);
            bar.style.width = percent + "%";
            status.textContent = `Saved: ₹${savedAmount} / ₹${savingGoal}`;
        } else {
            bar.style.width = "0%";
            status.textContent = "Saved: ₹0";
        }
    }

    function clearForm() {
        document.getElementById("date").value = "";
        document.getElementById("description").value = "";
        document.getElementById("category").value = "";
        document.getElementById("amount").value = "";
        document.getElementById("type").value = "";
    }

    function saveData() {
        localStorage.setItem("transactions", JSON.stringify(transactions));
    }
</script>

</body>
</html>

